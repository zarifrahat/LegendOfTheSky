!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=function(){function t(e,i,s,n,a,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.x=i,this.y=s,this.height=4,this.width=24,this.speed=6,this.shooter=n,this.turnRate=a,this.travelDistance=h,this.drawBullet=this.drawBullet.bind(this),this.animate=this.animate.bind(this),this.animateTurn=this.animateTurn.bind(this),this.move=this.move.bind(this)}var e,i,n;return e=t,(i=[{key:"drawBullet",value:function(){var t=this,e=new Image;e.onload=function(){return t.ctx.drawImage(e,t.x,t.y,24,4)},"Hero"===this.shooter?e.src="src/images/blueshot.png":e.src="src/images/redshot.png",this.animateTurn(this.ctx,this.x,this.y,e)}},{key:"animateTurn",value:function(t,e,i,s){t.save(),t.translate(e,i),t.translate(12,2),t.rotate(this.turnRate*Math.PI/180),t.translate(-12,-2),t.drawImage(s,0,0,24,4),t.restore()}},{key:"move",value:function(){this.x+=this.speed*Math.cos(this.turnRate*Math.PI/180),this.y+=this.speed*Math.sin(this.turnRate*Math.PI/180),this.travelDistance+=1}},{key:"animate",value:function(){this.drawBullet(),this.move()}}])&&s(e.prototype,i),n&&s(e,n),t}();function a(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.x=0,this.y=100,this.height=40,this.width=56,this.health=100,this.armor=0,this.speed=2,this.turnRate=0,this.drawHero=this.drawHero.bind(this),this.animate=this.animate.bind(this),this.move=this.move.bind(this),this.shootBullet=this.shootBullet.bind(this),this.keysPressed=this.keysPressed.bind(this),this.keysUp=this.keysUp.bind(this),this.turnLeft=this.turnLeft.bind(this),this.turnRight=this.turnRight.bind(this),this.bullets=[]}var e,i,s;return e=t,(i=[{key:"drawHero",value:function(){var t=this,e=new Image;e.onload=function(){return t.ctx.drawImage(e,t.x,t.y,40,56)},e.src="src/images/hero.png",this.animateTurn(this.ctx,this.x,this.y,e)}},{key:"animateTurn",value:function(t,e,i,s){t.save(),t.translate(e,i),t.translate(20,28),t.rotate(this.turnRate*Math.PI/180),t.translate(-20,-28),t.drawImage(s,0,0,40,56),t.restore()}},{key:"move",value:function(){this.x+=this.speed*Math.cos(this.turnRate*Math.PI/180),this.y+=this.speed*Math.sin(this.turnRate*Math.PI/180)}},{key:"turnLeft",value:function(){this.turnRate+=-6}},{key:"turnRight",value:function(){this.turnRate+=6}},{key:"keysPressed",value:function(t){90===t.keyCode&&this.shootBullet(),"Right"==t.key||"ArrowRight"==t.key?this.turnRight():"Left"!=t.key&&"ArrowLeft"!=t.key||this.turnLeft()}},{key:"keysUp",value:function(t){"Right"!=t.key&&"ArrowRight"!=t.key&&"Left"!=t.key&&"ArrowLeft"!=t.key||(this.turnRate=this.turnRate)}},{key:"animate",value:function(){this.drawHero(),this.move(),document.addEventListener("keydown",this.keysPressed),document.addEventListener("keyup",this.keysUp)}},{key:"shootBullet",value:function(){var t=new n(this.ctx,this.x,this.y,"Hero",this.turnRate,0);this.bullets.push(t)}}])&&a(e.prototype,i),s&&a(e,s),t}();function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.height=25,this.width=50,this.x=Math.floor(1e3*Math.random()+200),this.y=Math.floor(600*Math.random()),this.speed=.1,this.turnRate=Math.floor(10*Math.random()+1),this.drawArmor=this.drawArmor.bind(this),this.move=this.move.bind(this)}var e,i,s;return e=t,(i=[{key:"drawArmor",value:function(){var t=this,e=new Image;e.onload=function(){return t.ctx.drawImage(e,t.x,t.y,50,25)},e.src="src/images/armor.png",this.ctx.drawImage(e,this.x,this.y,50,25)}},{key:"move",value:function(){this.x+=this.speed*Math.cos(this.turnRate*Math.PI/180),this.y+=this.speed*Math.sin(this.turnRate*Math.PI/180)}},{key:"animate",value:function(){this.drawArmor(),this.move()}}])&&r(e.prototype,i),s&&r(e,s),t}();function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var u=function(){function t(e,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.herox=i,this.heroy=s,this.height=63,this.width=46,this.x=Math.floor(1e3*Math.random()+200),this.y=Math.floor(600*Math.random()),this.speed=1.8,this.travelDistance=0,this.turnRate=Math.floor(10*Math.random()+1),this.drawVillain=this.drawVillain.bind(this),this.move=this.move.bind(this),this.animateTurn=this.animateTurn.bind(this),this.regularFlying=this.regularFlying.bind(this),this.aggroFlying=this.aggroFlying.bind(this),this.isHeroSpotted=this.isHeroSpotted.bind(this),this.shootBullet=this.shootBullet.bind(this),this.bullets=[],this.heroCurrentlySpotted=!1}var e,i,s;return e=t,(i=[{key:"drawVillain",value:function(){var t=this,e=new Image;e.onload=function(){return t.ctx.drawImage(e,t.x,t.y,t.width,t.height)},e.src="src/images/villain.png",this.animateTurn(this.ctx,this.x,this.y,e)}},{key:"animateTurn",value:function(t,e,i,s){t.save(),t.translate(e,i),t.translate(31.5,23),t.rotate(this.turnRate*Math.PI/180),t.translate(-31.5,-23),t.drawImage(s,0,0,this.width,this.height),t.restore()}},{key:"move",value:function(){this.x+=this.speed*Math.cos(this.turnRate*Math.PI/180),this.y+=this.speed*Math.sin(this.turnRate*Math.PI/180),this.travelDistance+=1}},{key:"animate",value:function(){this.drawVillain(),this.move()}},{key:"regularFlying",value:function(){100===this.travelDistance&&(this.turnRate+=7*(Math.random()<.5?-1:1),this.travelDistance=0)}},{key:"aggroFlying",value:function(){var t=this.heroy-this.y,e=Math.sqrt(Math.pow(this.herox-this.x,2)+Math.pow(this.heroy-this.y,2));this.turnRate+=Math.asin(t/e),this.shootBullet()}},{key:"isHeroSpotted",value:function(t,e){return Math.sqrt(Math.pow(t-this.x,2)+Math.pow(e-this.y,2))<300}},{key:"shootBullet",value:function(){if(this.bullets.length<2){var t=new n(this.ctx,this.x,this.y,"Villain",this.turnRate,0);this.bullets.push(t)}}}])&&o(e.prototype,i),s&&o(e,s),t}();function c(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.x=1200,this.y=600,this.hero=new h(e),this.bullet=new n(e,0,10,"hero",0),this.bullets=this.hero.bullets,this.villainbullets=[],this.armors=[],this.villains=[],this.animate=this.animate.bind(this),this.allObjects=this.allObjects.bind(this),this.addBullets=this.addBullets.bind(this),this.addVillainBullets=this.addVillainBullets.bind(this),this.updateVillainBulletsOnScreen=this.updateVillainBulletsOnScreen.bind(this),this.removeBullets=this.removeBullets.bind(this),this.createArmors=this.createArmors.bind(this),this.createVillains=this.createVillains.bind(this),this.checkCollision=this.checkCollision.bind(this),this.checkBulletCollision=this.checkBulletCollision.bind(this),this.checkHeroCollision=this.checkHeroCollision.bind(this),this.checkVillainBulletCollision=this.checkVillainBulletCollision.bind(this),this.spottedHero=this.spottedHero.bind(this),this.createArmors(),this.createVillains()}var e,i,s;return e=t,(i=[{key:"allObjects",value:function(){return[this.hero].concat(this.bullets,this.armors,this.villains,this.villainbullets)}},{key:"addBullets",value:function(){this.bullets=this.hero.bullets}},{key:"addVillainBullets",value:function(t){this.villainbullets=t.bullets}},{key:"updateVillainBulletsOnScreen",value:function(){var t=this;this.villains.forEach((function(e){t.addVillainBullets(e)}))}},{key:"removeBullets",value:function(){this.bullets=this.bullets.filter((function(t){return t.travelDistance<75})),this.villainbullets=this.villainbullets.filter((function(t){return t.travelDistance<75}))}},{key:"createArmors",value:function(){for(var t=0;t<5;t++){var e=new l(this.ctx);this.armors.push(e)}}},{key:"createVillains",value:function(){for(var t=0;t<5;t++){var e=new u(this.ctx,this.hero.x,this.hero.y);this.villains.push(e)}}},{key:"checkCollision",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<t.width}},{key:"checkBulletCollision",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<e.width}},{key:"checkHeroCollision",value:function(){for(var t=0;t<this.armors.length;t++){var e=this.armors[t];this.checkCollision(this.hero,e)&&(this.armors.splice(t,1),this.hero.armor+=10)}}},{key:"checkVillainBulletCollision",value:function(){for(var t=0;t<this.bullets.length;t++)for(var e=this.bullets[t],i=0;i<this.villains.length;i++){var s=this.villains[i];this.checkBulletCollision(s,e)&&(this.bullets.splice(t,1),this.villains.splice(i,1))}}},{key:"spottedHero",value:function(){for(var t=0;t<this.villains.length;t++){var e=this.villains[t];e.isHeroSpotted(e.herox,e.heroy,e)?e.aggroFlying():e.regularFlying()}}},{key:"animate",value:function(){this.ctx.clearRect(0,0,canvas.width,canvas.height),this.addBullets(),this.updateVillainBulletsOnScreen(),this.removeBullets(),this.checkHeroCollision(),this.checkVillainBulletCollision(),this.spottedHero(),this.allObjects().forEach((function(t){t.animate(),t.x>canvas.width&&(t.x=0),t.y>canvas.height&&(t.y=0),t.x<0&&(t.x=canvas.width),t.y<0&&(t.y=canvas.height)})),requestAnimationFrame(this.animate)}},{key:"restartGame",value:function(){this.ctx.clearRect(0,0,canvas.width,canvas.height)}}])&&c(e.prototype,i),s&&c(e,s),t}();document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("canvasBackground").getContext("2d"),e=new Image;e.onload=function(){return t.drawImage(e,0,0,3e3,2e3,0,0,1200,800)},e.src="src/images/sky.jpg";var i=document.getElementById("canvas").getContext("2d"),s=new d(i),n=!1;document.addEventListener("keydown",(function(t){13!==t.keyCode||n||(n=!0,s.animate())}))}))}]);
//# sourceMappingURL=main.js.map